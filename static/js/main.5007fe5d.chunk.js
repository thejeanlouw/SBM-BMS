(this["webpackJsonpsbm-bms"]=this["webpackJsonpsbm-bms"]||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(1),c=n.n(r),s=n(34),i=n.n(s),o=(n(43),n(9)),u=n.n(o),l=n(16),p=n(14),d=n(20),b=n(21),h=n(23),j=n(22),f=(n(45),n(37)),m=(n(46),function(e){var t=e.children,n=(e.isGoogleSignIn,Object(f.a)(e,["children","isGoogleSignIn"]));return Object(a.jsx)("button",Object(l.a)(Object(l.a)({className:"".concat(t," custom-button")},n),{},{children:t}))}),O=(n(47),n(15));function x(){return Object(a.jsxs)("div",{className:"main-menu-buttons",children:[Object(a.jsx)(O.b,{to:"/",children:Object(a.jsx)(m,{children:"Welcome"})}),Object(a.jsx)(O.b,{to:"showcase",children:Object(a.jsx)(m,{children:"Showcase"})}),Object(a.jsx)(O.b,{to:"sign-in",children:Object(a.jsx)(m,{children:"Sign-In"})})]})}n(52);function v(){return Object(a.jsxs)("div",{className:"main-page",children:[Object(a.jsx)("span",{className:"header",children:"SMB | BMS"}),Object(a.jsx)(x,{})]})}n(53);var g=n(26);n(63),n(54);g.a.initializeApp({apiKey:"AIzaSyA8CE6cmO3e84VpfChKyM44KDe28bn5OMk",authDomain:"parangelmata.firebaseapp.com",databaseURL:"https://parangelmata.firebaseio.com",projectId:"parangelmata",storageBucket:"parangelmata.appspot.com",messagingSenderId:"824823048409",appId:"1:824823048409:web:4902e2715229ff2f3576c8",measurementId:"G-0QKH2090T4"});var k=g.a.auth(),w=g.a.firestore(),A=g.a,N=n(56),I=new A.auth.GoogleAuthProvider;I.setCustomParameters({prompt:"select_account"});var y=function(){return k.signInWithPopup(I)},S=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=N("".concat(t.ua)),a=w.doc("smb-devices/".concat(n)),e.next=7,a.get();case 7:if(!(r=e.sent).exists){e.next=14;break}return e.next=12,r.data();case 12:return c=e.sent,e.abrupt("return",{id:n,data:c,reg:a});case 14:return e.abrupt("return",{data:{id:0,linkAddress:"https://blog.logrocket.com/react-hooks-with-firebase-firestore/",linkProperties:{}}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,c,s,i,o,p,d,b,h,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=w.doc("smb-users/".concat(t.uid)),e.next=5,a.get();case 5:if(e.sent.exists){e.next=19;break}return r=t.displayName,c=t.email,t.phoneNumber,s=new Date,!1,!1,e.prev=11,e.next=14,a.set(Object(l.a)({displayName:r,email:c,createdAt:s,signedAgreements:false,onboardedComplete:false},n));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),console.log("ERROR CREATING USER",e.t0.message);case 19:if(null!=n&&null!=n.ua){e.next=21;break}return e.abrupt("return",a);case 21:return i=N("".concat(n.ua)),o=w.doc("smb-devices/".concat(i)),e.next=25,o.get();case 25:if(e.sent.exists){e.next=42;break}return p=t.email,d=t.uid,b=new Date,!1,"https://www.parangelmata.com/plans-pricing",h={},j=n,e.prev=34,e.next=37,o.set({email:p,ownerId:d,firstAccessedAt:b,internalLink:false,linkAddress:"https://www.parangelmata.com/plans-pricing",linkProperties:h,deviceInfo:j});case 37:e.next=42;break;case 39:e.prev=39,e.t1=e.catch(34),console.log("ERROR CREATING DEVICE",e.t1.message);case 42:return e.abrupt("return",a);case 43:case"end":return e.stop()}}),e,null,[[11,16],[34,39]])})));return function(t,n){return e.apply(this,arguments)}}(),E=n(5),D=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleYes=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:t.sent,e.props.history.push("/link-page");case 4:case"end":return t.stop()}}),t)}))),e.handleNo=function(){e.props.history.push("/link-page")},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"sign-in-page",children:[Object(a.jsx)("span",{className:"main-text",children:"IS THIS THE MANAGING DEVICE?"}),Object(a.jsxs)("div",{className:"yes-or-no-buttons",children:[Object(a.jsx)(m,{onClick:this.handleYes,children:"Yes"}),Object(a.jsx)(m,{onClick:this.handleNo,children:"No"})]})]})}}]),n}(c.a.Component),R=Object(E.f)(D),G=n(27),M=n(36),U=(n(61),function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).componentDidMount=Object(p.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(G.deviceDetect)(),e.next=3,S(t);case 3:n=e.sent,a.setState({device:n},(function(){console.log(a.state)}));case 5:case"end":return e.stop()}}),e)}))),a.state={device:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state.device,t="";return null!=e&&null!=e.data&&null!=e.data.linkAddress?(t=e.data.linkAddress,Object(a.jsx)("div",{className:"iframe",children:Object(a.jsx)(M.a,{className:"frame",id:e.id,url:"".concat(t),width:"100%",height:"100%"})})):Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:"NO LINK"})})}}]),n}(c.a.Component)),F=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).unsubscribeFromAuth=null,e.state={currentUser:null},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Object(G.deviceDetect)();this.unsubscribeFromAuth=k.onAuthStateChanged(function(){var n=Object(p.a)(u.a.mark((function n(a){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=6;break}return n.next=3,C(a,t);case 3:r=n.sent,console.log("userAuth: ",a),r.onSnapshot((function(n){e.setState({currentUser:Object(l.a)({id:n.id},n.data),device:t},(function(){return console.log("currentUser: ",e.state.currentUser)}))}));case 6:e.setState({currentUser:a});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth(),k.signOut()}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(E.c,{children:[Object(a.jsx)(E.a,{path:"/sign-in",component:R}),Object(a.jsx)(E.a,{path:"/info-page",component:v}),Object(a.jsx)(E.a,{path:"/link-page",component:U}),Object(a.jsx)(E.a,{path:"/",component:v})]})})}}]),n}(c.a.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(O.a,{children:Object(a.jsx)(F,{})})}),document.getElementById("root")),P()}},[[62,1,2]]]);
//# sourceMappingURL=main.5007fe5d.chunk.js.map